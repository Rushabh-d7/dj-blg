{% extends "blog/blogs_base.html" %}


{% block title %}{{ post.title }}{% endblock %}

{% block content %}

<header class="masthead">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class=" col-md-8 col-md-10 mx-auto">
                <div class="site-heading">
                    
                    <h3 class=" site-heading my-4 mt-3 text-white"> Welcome, {{ user.username }} </h3>
                </div>
            </div>
        </div>
    </div>
</header>


<div class="container" style="flex-direction: column; max-width: 1150px; margin-left: 475px;">
    <div class="row">
        <div class="col-md-10 mt-5 center">
            <div class="card mb-4">
                <div class="card-body">
                    <h2 class="card-title">{{ post.title }}</h2>
                    <p class="card-text text-muted h6">Author: {{ post.author }}</p>
                    <p class="card-text text-muted h6">Created On: {{ post.created_on }}</p>
                    <p class="card-text" style="font-size: larger;">{{post.content|slice:":400" }}</p>
                    <a href="/blog" class="btn btn-primary">Home</a>
                </div>
            </div>

            <h3>Comments</h3>
            <div>
                {% for comment in comments %}
                <div class="card mb-2">
                    <div class="card-body">
                        <p class="card-text"><strong>{{ comment.author }}</strong> said:</p>
                        <p class="card-text">{{ comment.content }}</p>
                        <p class="card-text text-muted">{{ comment.created_on|date:"M d, Y H:i" }}</p>
                    </div>
                </div>
                {% empty %}
                <p>No comments yet.</p>
                {% endfor %}
            </div>

            {% if user.is_authenticated %}
            <h3 style="padding-top: 20px; padding-bottom: 5px;">Add a Comment</h3>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
            {% else %}
            <p>You must be <a href="{% url 'login' %}">logged in</a> to comment.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
